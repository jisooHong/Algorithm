```python3
"""
3190. 뱀
"""
import sys

n = int(sys.stdin.readline())
k = int(sys.stdin.readline())

matrix = [[0 for _ in range(n)] for _ in range(n)]
"""
사과가 있는 곳은 -1로 적기
현재 뱀이 있는 곳은 1로 체크해주기
"""
for i in range(k):
    x,y = map(int,sys.stdin.readline().split())
    matrix[x-1][y-1] = -1

L = int(sys.stdin.readline())
change = []
for i in range(L):
    x,c = sys.stdin.readline().split()
    change.append([int(x),c])

matrix[0][0] = 1
#direction 순서대로 pop 해주기
time = 0
direction = [0,1,"R"]
head_x,head_y = 0,0
tail_x,tail_y = 0,0
while change:
    x,c = change.pop(0)
    end = 0
    print(time,x)
    for i in range(time,x):
        time += 1
        print("time:",time,head_x,head_y,"x:",x,"c:",c,"i:",i)
        # 현재 방향으로 앞으로 나가가기
        dx = head_x + direction[0]
        dy = head_y + direction[1]

        if 0 <= dx < n and 0 <= dy < n:
            # 사과가 있는지 확인
            if matrix[dx][dy] == -1:
                head_x = dx
                head_y = dy
                matrix[dx][dy] = 1
            elif matrix[dx][dy] == 0:
                # head 옮겨주고 tail 자리 0으로 바꿔주기, tail 위치 업데이트
                head_x = dx
                head_y = dy

                matrix[tail_x][tail_y] = 0
                tail_x = tail_x + direction[0]
                tail_y = tail_y + direction[1]
            elif matrix[dx][dy] == 1:
                # 뱀 몸에 부딪힘, 게임끝
                end = 1
                break

        else:
            # 벽에 부딪힘 , 게임 끝
            end = 1
            break

        if end == 1:
            print(head_x,head_y)
            break

    if c == 'D': # 오른쪽으로 90도
        if direction[2] == 'R':
            direction = [1,0,'D']
        elif direction[2] == 'L':
            direction = [-1,0,'U']
        elif direction[2] == 'U':
            direction = [0,1,'R']
        elif direction[2] == 'D':
            direction = [0,-1,'L']

    elif c == 'L': # 왼쪽으로 90도도
        if direction[2] == 'R':
            direction = [-1,0,'U']
        elif direction[2] == "L":
            direction = [1, 0, 'D']
        elif direction[2] == 'U':
            direction = [0, -1, 'L']
        elif direction[2] == 'D':
            direction = [0, 1, 'R']



print(time)

```
